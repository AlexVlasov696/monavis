<?php $order = wc_get_order( $order_id ); ?><div class="col-md-6"><h3><?php _e( 'Order Details', 'woocommerce' ); ?></h3><table class="shop_table order_details table table-hover"><thead><tr><th class="product-name"><?php _e( 'Product', 'woocommerce' ); ?></th><th class="product-total"><?php _e( 'Total', 'woocommerce' ); ?></th></tr></thead><tbody><?php if ( sizeof($order->get_items()) > 0 ): ?><?php foreach( $order->get_items() as $item_id => $item ): ?><?php $_product  = apply_filters( 'woocommerce_order_item_product', $order->get_product_from_item( $item ), $item ); ?><?php $item_meta = new WC_Order_Item_Meta( $item['item_meta'], $_product ); ?><?php if ( apply_filters('woocommerce_order_item_visible', true, $item) ): ?><tr class="&lt;?php echo esc_attr( apply_filters( 'woocommerce_order_item_class', 'order_item', $item, $order ) ); ?&gt;"><td class="product-name"><?php if ( $_product && !$_product->is_visible() ) : ?><?php print apply_filters( 'woocommerce_order_item_name', $item['name'], $item ); ?><?php else: ?><?php print apply_filters( 'woocommerce_order_item_name', sprintf( '<a href="%s">%s</a>', get_permalink( $item['product_id'] ), $item['name'] ), $item ); ?><?php endif; ?><?php print apply_filters( 'woocommerce_order_item_quantity_html', ' <strong class="product-quantity">' . sprintf( '&times; %s', $item['qty'] ) . '</strong>', $item ); ?><?php do_action( 'woocommerce_order_item_meta_start', $item_id, $item, $order ); ?><?php $item_meta->display(); ?><?php if ( $_product && $_product->exists() && $_product->is_downloadable() && $order->is_download_permitted() ) : ?><?php $download_files = $order->get_item_downloads( $item ); ?><?php $i = 0; ?><?php $links = array(); ?><?php foreach ( $download_files as $download_id => $file ) : ?><?php $i++; ?><?php $links[] = '<small><a href="' . esc_url( $file['download_url'] ) . '">' . sprintf( __( 'Download file%s', 'woocommerce' ), ( count( $download_files ) > 1 ? ' ' . $i . ': ' : ': ' ) ) . esc_html( $file['name'] ) . '</a></small>'; ?><?php endforeach; ?><?php print '<br/>' . implode( '<br/>', $links ); ?><?php endif ?><?php do_action( 'woocommerce_order_item_meta_end', $item_id, $item, $order ); ?></td><td class="product-total"><?php print $order->get_formatted_line_subtotal( $item ); ?></td></tr><?php endif ?><?php endforeach; ?><?php if ( $order->has_status(array('completed', 'processing')) && ( $purchase_note = get_post_meta($_product->id, '_purchase_note', true) ) ) : ?><tr class="product-purchase-note"><td colspan="3"><?php print wpautop( do_shortcode( wp_kses_post( $purchase_note ) ) ); ?></td></tr><?php endif; ?><?php endif; ?></tbody><?php do_action( 'woocommerce_order_items_table', $order ); ?><?php $has_refund = false; ?><?php if ( $total_refunded = $order->get_total_refunded()): ?><?php $has_refund = true; ?><?php endif; ?><?php if ( $totals = $order->get_order_item_totals()) : ?><?php foreach ( $totals as $key => $total ): ?><?php if(!in_array($key, array('shipping', 'payment_method'))): ?><?php $value = $total['value']; ?><?php if ( $has_refund && $key === 'order_total' ): ?><?php $refunded_tax_del = ''; ?><?php $refunded_tax_ins = ''; ?><?php if ( wc_tax_enabled() && 'incl' == $order->tax_display_cart ): ?><?php $tax_del_array = array(); ?><?php $tax_ins_array = array(); ?><?php if ( 'itemized' == get_option('woocommerce_tax_total_display') ): ?><?php foreach ( $order->get_tax_totals() as $code => $tax ): ?><?php $tax_del_array[] = sprintf( '%s %s', $tax->formatted_amount, $tax->label ); ?><?php $tax_ins_array[] = sprintf( '%s %s', wc_price( $tax->amount - $order->get_total_tax_refunded_by_rate_id( $tax->rate_id ), array( 'currency' => $order->get_order_currency() ) ), $tax->label ); ?><?php endforeach; ?><?php else: ?><?php $tax_del_array[] = sprintf( '%s %s', wc_price( $order->get_total_tax(), array( 'currency' => $order->get_order_currency() ) ), WC()->countries->tax_or_vat() ); ?><?php $tax_ins_array[] = sprintf( '%s %s', wc_price( $order->get_total_tax() - $order->get_total_tax_refunded(), array( 'currency' => $order->get_order_currency() ) ), WC()->countries->tax_or_vat() ); ?><?php endif; ?><?php if ( !empty($tax_del_array)): ?><?php $refunded_tax_del .= ' ' . sprintf( __( '(Includes %s)', 'woocommerce' ), implode( ', ', $tax_del_array ) ); ?><?php endif; ?><?php if ( !empty($tax_ins_array) ) : ?><?php $refunded_tax_ins .= ' ' . sprintf( __( '(Includes %s)', 'woocommerce' ), implode( ', ', $tax_ins_array ) ); ?><?php endif; ?><?php endif; ?><?php $value = '<del>' . strip_tags( $order->get_formatted_order_total() ) . $refunded_tax_del . '</del> <ins>' . wc_price( $order->get_total() - $total_refunded, array( 'currency' => $order->get_order_currency() ) ) . $refunded_tax_ins . '</ins>'; ?><?php endif; ?><tr><th scope="row"><?php print $total['label']; ?></th><td><?php print $value; ?></td></tr><?php endif; ?><?php endforeach; ?><?php endif; ?><?php if($has_refund): ?><tr><th scope="row"><?php print __( 'Refunded:', 'woocommerce' ); ?></th><td><?php print wc_price( $total_refunded, array( 'currency' => $order->get_order_currency() ) ); ?></td></tr><?php endif; ?><?php if('' != $order->customer_note): ?><tr><th scope="row"><?php print __( 'Note:', 'woocommerce' ); ?></th><td><?php print wptexturize( $order->customer_note ); ?></td></tr><?php endif; ?></table><?php do_action( 'woocommerce_order_details_after_order_table', $order ); ?></div><div class="col-md-6"><h3><?php print __( 'Address', 'woocommerce'); ?></h3><table class="shop_table table table-hover table-address"><tbody><?php if(!empty($order->shipping_first_name)): ?><tr><td><?php print __( 'First Name', 'woocommerce'); ?></td><td><?php print $order->shipping_first_name; ?></td></tr><?php endif; ?><tr><td><?php print __( 'Last Name', 'woocommerce'); ?></td><td><?php print $order->shipping_last_name; ?></td></tr><tr><td><?php print __( 'Company Name', 'woocommerce'); ?></td><td><?php print $order->shipping_company; ?></td></tr><tr><td><?php print __( 'Address', 'woocommerce'); ?></td><td><?php print $order->shipping_address_1; ?>&nbsp;<?php print $order->shipping_address_2; ?></td></tr><tr><td><?php print __( 'City', 'woocommerce'); ?></td><td><?php print $order->shipping_city; ?></td></tr><tr><td><?php print __( 'County', 'woocommerce'); ?></td><td><?php print $order->shipping_state; ?></td></tr><tr><td><?php print __( 'Postcode', 'woocommerce'); ?></td><td><?php print $order->shipping_postcode; ?></td></tr><tr><td><?php print __( 'Country', 'woocommerce'); ?></td><td><?php print $order->shipping_country; ?></td></tr><tr><td><?php print __( 'Phone', 'woocommerce'); ?></td><td><?php print $order->billing_phone; ?></td></tr><tr><td><?php print __( 'Email Address', 'woocommerce'); ?></td><td><?php print $order->billing_email; ?></td></tr></tbody></table></div>